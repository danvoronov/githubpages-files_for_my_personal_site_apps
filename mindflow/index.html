<!DOCTYPE html>  
<html lang="ru"><head><title>MindFlow</title>
<meta charset="utf-8">

<link type="text/css" href="css/trontastic/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" />	
<link type="text/css" href="css/jquery.tipsy.css" rel="stylesheet" />	
<link type="text/css" href="css/mindflow_new.css" rel="stylesheet" />	

<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script>
    	
<script type="text/javascript" src="js/raphael-min.js"></script>
<script type="text/javascript" src="js/dracula_graffle.js"></script>
<script type="text/javascript" src="js/dracula_graph.js"></script>
<script type="text/javascript" src="js/dracula_algorithms.js"></script>
	
<script type="text/javascript" src="js/jquery.jeditable.mini.js"></script>
<script type="text/javascript" src="js/jquery.tipsy.min.js"></script>

	<script type="text/javascript" src="js/html5storage.js"></script>
	<script type="text/javascript" src="mindflow.js"></script>
</head> 
<body><div>

<div id="maket">
	<!-- Новый интерфейс с рабочей областью -->
	<div id="main_interface">
		<!-- Панель управления сверху -->
		<div id="control_panel">
			<div id="control_left">
				<div class="control-section">
					<div class="tema-section">TOPIC: <span id="tema" class="editabletm temaclass">enter topic here</span></div>
				</div>
			</div>
			<div id="control_center">
				<input type="text" id="element_input" placeholder="Enter element and press Enter to add to workspace..." />
			</div>
			<div id="control_right">
				<a id='legend_tooltip' title='<b>Graph Legend:</b><br/>🔴 <b>Red border:</b> Elements without outgoing connections<br/>🟡 <b>Yellow border:</b> Selected element<br/>🔵 <b>Blue border:</b> Regular elements<br/>➡️ <b>Green arrows:</b> Flow connections between elements'>
					<span style="font-size: 16px;">📊</span>
				</a>
				<a id='help_tooltip' title='<b>Mind Flow Creation:</b><br/>1. Enter element and press Enter - it appears on workspace<br/>2. Click on elements to create connections<br/>3. Use "Arrange Graph" for automatic layout'>
					<img src="img/question-icon.png" alt="[?]" width="20" height="20" />
				</a>
				<button onclick="renew();" class="reset-btn">RESET</button>
			</div>
		</div>
		
		<!-- Рабочая область для графа -->
		<div id="workspace">
			<svg id="connections_svg"></svg>
			<div id="elements_container"></div>
			<button id="arrange_graph" class="floating-button" style="display: none;">
				Arrange Graph
			</button>
			<div id="status_counter">
				Elements: <span id="element_count">0</span> | Connections: <span id="connections_count">0</span>
			</div>
			<div id="analysis_legend" style="display: none;">
				<div class="legend-header">Analysis</div>
				<div class="legend-content">
					<div class="legend-item">
						<span class="legend-color" style="background: #ff6b6b;"></span>
						<strong>Edge Elements</strong> — Triggers that can initiate processes. Influencing them is often ineffective as changes are quickly dampened by the system.
					</div>
					<div class="legend-item">
						<span class="legend-color" style="background: #4ecdc4;"></span>
						<strong>Cyclic Elements</strong> — Elements where the situation eventually arrives and what stabilizes it. Usually there's at least one cycle in the flow. Breaking it transforms the situation into something else.
					</div>
					<div class="legend-item">
						<span class="legend-color" style="background: #45b7d1;"></span>
						<strong>Hub Elements (with multiplier)</strong> — Connected to multiple flows, often becoming the problem because they're very difficult to change. The more connections they have, the more stable and resistant to change they become.
					</div>
					<div class="legend-item">
						<span class="legend-color" style="background: #96ceb4;"></span>
						<strong>Bridge Elements</strong> — Can become the weakest link. They have only one incoming connection, which is relatively easy to weaken. Focus here when planning to change the situation, especially bridges in stabilizing loops.
					</div>
				</div>
			</div>
		</div>
	</div>

	<div id="flowin" style="display: none;">
		<div id="list_area">
			<div id="stcol1" class="stcol ui-corner-all">		<img src="img/pozSmiley.png" alt="позитив" width="24" height="24" /><ul id="sort_poz" class="connectedSortable"></ul></div>
			<div id="stcol2" class="stcol ui-corner-all"><ul id="sort_norm" class="connectedSortable"></ul></div>
			<div id="stcol3" class="stcol ui-corner-all">		<div style="text-align: right;"><img src="img/negSmiley.png" alt="негатив" width="22" height="22" /></div><ul id="sort_neg"	class="connectedSortable"></ul></div>
			<div style="clear: both;"></div>
		</div>
		<div id="makeflbt" style="margin-top: 10px;">
			<a onclick="$('#dialog-legend').dialog('open');" href="#" style="visibility:hidden;" id="legend-link">описание значений</a>
			<button id="back_to_input" class="ui-button ui-widget ui-corner-all" style="margin-left: 20px;">
				Вернуться к вводу элементов
			</button>
		</div>
	</div>
		
</div>

<div id="dialog-legend" title="Graph Analysis Legend">
<b>Mind Flow Graph Analysis:</b>
<br/><br/><span style="color: red;">🔴 Red Border Elements</span> — Elements without outgoing connections. These are endpoints or elements that need connections to complete the flow.
<br/><br/><span style="color: blue;">🔵 Blue Border Elements</span> — Regular elements with proper connections. These form the main flow of your mind map.
<br/><br/><span style="color: #ffc107;">🟡 Yellow Border Elements</span> — Currently selected element for creating connections.
<br/><br/><span style="color: green;">➡️ Green Arrows</span> — Flow connections showing the relationship and direction between elements. Each element can have only one outgoing connection (1:1 relationship).
<br/><br/><b>Usage Tips:</b>
<br/>• Click elements to create connections
<br/>• Red borders indicate incomplete flows
<br/>• Use "Arrange Graph" for better layout
<br/>• Double-click to delete elements
</div>
</div>
</body>
</html>